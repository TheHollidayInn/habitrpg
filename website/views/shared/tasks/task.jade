script(id='templates/task.html', type="text/ng-template")
  div(ng-repeat='task in getTaskList(list, taskList, obj) | filterByTaskInfo: obj.filterQuery | conditionalOrderBy: list.view=="dated":"date"')
    h4(ng-if='task.question')
      strong(style='margin-right: 1em;') Q:
      | {{task.question}}
    li(id='task-{{::task._id}}',
      class='task {{getClasses(task, user, list, main)}}',
      ng-class='{"cast-target":spell && (list.type != "reward"), "locked-task":obj._locked === true}',
      ng-click='spell && (list.type != "reward") && castEnd(task, "task", $event)',
      ng-show='shouldShow(task, list, user.preferences)',
      popover-trigger='mouseenter', popover-placement="top", popover-append-to-body='{{::modal ? "false":"true"}}',
      data-popover-html="{{taskPopover(task) | markdown}}")

      ng-form(name='taskForm')
        include ./meta_controls

        include ./task_view/index

      div(class='{{obj._id}}{{task._id}}-chart', ng-show='charts[obj._id+task._id]')
